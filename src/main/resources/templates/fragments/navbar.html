<!-- Standardized Navigation Bar Fragment with Custom Links -->
<!-- Usage: th:replace="~{fragments/navbar :: navbar(navLinks=${navLinks})}" -->
<!-- navLinks should be a List<Map<String, String>> where each map has 'label' and 'url' keys -->
<header th:fragment="navbar(navLinks)" class="text-white shadow-lg nav-header" style="background: linear-gradient(135deg, #1e40af 0%, #1e3a8a 100%) !important;">
    <nav class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center py-4">
            <a href="/" class="flex items-center space-x-3 text-2xl font-bold text-white hover:text-reliable-yellow-300 transition-colors duration-300">
                <!-- Company Logo -->
                <img src="/images/Reliable 1.png" alt="Reliable Carriers Logo - Professional Courier Services" style="height:50px; width:auto;" loading="lazy">
            </a>
            <ul class="hidden md:flex space-x-8">
                <!-- Custom Navigation Links -->
                <li th:each="link : ${navLinks}" th:if="${link != null}">
                    <a th:href="${link.url}" 
                       th:text="${link.label}" 
                       th:id="${link.id}"
                       class="text-white hover:text-reliable-yellow-300 transition-colors duration-300 font-medium"
                       th:classappend="${link.active != null and link.active} ? 'text-reliable-yellow-300 font-bold' : ''">
                    </a>
                </li>
                <!-- Dark Mode Toggle -->
                <li class="flex items-center">
                    <label class="flex items-center cursor-pointer">
                        <input type="checkbox" id="darkModeToggle" class="sr-only">
                        <div class="relative">
                            <div class="w-12 h-6 bg-gray-600 rounded-full shadow-inner"></div>
                            <div class="absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full shadow transform transition-transform duration-300 ease-in-out"></div>
                        </div>
                        <span class="ml-2 text-white">
                            <i class="fas fa-moon"></i>
                        </span>
                    </label>
                </li>
            </ul>
            <!-- Mobile menu button -->
            <button class="md:hidden text-white hover:text-reliable-yellow-300 transition-colors duration-300" id="mobileMenuBtn">
                <i class="fas fa-bars text-xl"></i>
            </button>
        </div>
        <!-- Mobile menu -->
        <div class="md:hidden hidden" id="mobileMenu">
            <ul class="py-4 space-y-4">
                <!-- Custom Navigation Links for Mobile -->
                <li th:each="link : ${navLinks}" th:if="${link != null}">
                    <a th:href="${link.url}" 
                       th:text="${link.label}" 
                       th:id="${link.id != null ? link.id + 'Mobile' : null}"
                       class="block text-white hover:text-reliable-yellow-300 transition-colors duration-300 font-medium"
                       th:classappend="${link.active != null and link.active} ? 'text-reliable-yellow-300 font-bold' : ''">
                    </a>
                </li>
            </ul>
        </div>
    </nav>
</header>

<script>
    // Mobile menu toggle
    document.addEventListener('DOMContentLoaded', function() {
        const mobileMenuBtn = document.getElementById('mobileMenuBtn');
        const mobileMenu = document.getElementById('mobileMenu');
        
        if (mobileMenuBtn && mobileMenu) {
            mobileMenuBtn.addEventListener('click', function() {
                mobileMenu.classList.toggle('hidden');
            });
        }
        
        // Dark mode toggle
        const darkModeToggle = document.getElementById('darkModeToggle');
        if (darkModeToggle) {
            darkModeToggle.addEventListener('change', function() {
                document.documentElement.classList.toggle('dark');
                localStorage.setItem('darkMode', this.checked);
            });
            
            // Load saved dark mode preference
            if (localStorage.getItem('darkMode') === 'true') {
                darkModeToggle.checked = true;
                document.documentElement.classList.add('dark');
            }
        }
        
        // Logout button handlers
        const logoutBtn = document.getElementById('logoutBtn');
        const logoutBtnMobile = document.getElementById('logoutBtnMobile');
        
        function handleLogout(e) {
            e.preventDefault();
            // You can customize this logout logic
            if (confirm('Are you sure you want to logout?')) {
                window.location.href = '/logout';
            }
        }
        
        if (logoutBtn) {
            logoutBtn.addEventListener('click', handleLogout);
        }
        
        if (logoutBtnMobile) {
            logoutBtnMobile.addEventListener('click', handleLogout);
        }
    });
</script>

